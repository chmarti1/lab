[back](documentation.md)

Version 4.00<br>
September 2019<br>
Chris Martin<br>

## Data files

LConfig includes two functions for creating data files: `lc_datafile_init()` and `lc_datafile_write()` described in the [api](api.md).  They are used in both the `lcburst` and `lcrun` [binaries](bin.md) to produce a standardized human-readable data file that embeds the configuration in a header.

A data file begins with the device configuration, ended by a `##`, followed by a time stamp, followed by the data.

```bash
# Configuration automatically generated by WRITE_CONFIG()
connection usb
device t4
name "My_T4_0888"
serial "440010888"
samplehz 2000.000000
settleus 1.000000
nsample 2000

# Analog Inputs
aichannel 0
ainegative 1
airange 1.000000
airesolution 0
aicalslope 20.000000
aicalzero 0.400000
aiunits "psi"
ailabel "Pressure"

distream 48

str:note0 "This is a note I added later."

## End Configuration ##
#: Sat Jun 22 21:02:12 2019
1.419444e+00	6.550400e+04
1.419444e+00	6.550400e+04
1.419444e+00	6.550400e+04
1.419444e+00	6.550400e+04
1.398734e+00	6.550400e+04
1.419444e+00	6.550400e+04
1.419444e+00	6.550400e+04
1.419444e+00	6.550400e+04
1.419444e+00	6.550400e+04
1.419444e+00	6.550400e+04
1.419444e+00	6.550400e+04
1.398734e+00	6.550400e+04
1.419444e+00	6.550400e+04
```

The header is just a standard [configuration](config.md) terminated by the first appearance of `##`.  This gives a human reader or a post-processing code enough information to interpret the data that follow.  Meta parameters like `note0` can either be configured before data are collected, but the intent is also for users to be able to easily interject their own comments manually.  This makes it easier to keep notes on the fly while taking data.

The first line of the data also appears like a comment.  It always begins with `#:` and a space.  The following timestamp is a standard 24-character [time stamp](https://www.gnu.org/software/libc/manual/html_node/Formatting-Calendar-Time.html#Formatting-Calendar-Time).  It takes the form `DDD MMM dd hh:mm:ss YYYY` when D is the abbreviated day of the week, M is the abbreviated month, d is the calendar day of the month, h is the 24-hour clock hour, m is the minute, s is the second, and Y is the 4-digit year.

The data are in exponential floating point tab-separated columns.  Currently, the data are formatted in exponential notation with seven significant figures (%.6e format).  The data columns are arranged in the same order that the channels were configured *except* that the diostream column *always* appears last when it is configured.  Note that the digital input stream is also written using the same format, but the value it represents is 65,504 or 0b1111111111100000.  Only two digital inputs were configured (DIO16 and DIO32).  In these data, DIO16 was 0 and DIO32 was 1.

In this example, the analog input configuration includes a calibration.  Calibrations are interpreted as being a conversion from volts to some unit (in this case, psi).  The data in the data file are always in volts as measured by the LabJack device.  It is up to post processing software to apply the calibration or not.  This has the advantage of making it easier to correct the data if the calibration turns out to be flawed.  Here, it looks like the pressure being measured is about (1.42 - 0.4)x20 = 20.4psi.

